{"version":3,"sources":["Modal.js","constant/index.js","Filter.js","Films.js","DataProvider.js","App.js","index.js"],"names":["modalRoot","document","getElementById","Modal","props","el","createElement","appendChild","this","removeChild","ReactDOM","createPortal","children","React","Component","FILTERS","COLORS","FilterContainer","styled","div","filters","setFilters","type","id","name","checked","length","onChange","for","map","filter","isChecked","includes","newFilters","a","concat","htmlFor","FilmContainer","Year","FilmBar","Film","memo","filmLists","setShouldShowModal","setFilmOnModal","filmList","key","film","get","some","onClick","console","log","prevProps","nextProps","sortByRate","b","rate","initialData","data1979","sort","data1980","data1981","data1982","data1983","data1984","data1985","data1986","data1987","data1988","data1989","data1990","data1991","data1992","data1993","data1994","data1995","data1996","data1997","data1998","data1999","data2000","data2001","data2002","DataContext","createContext","DataContextProvider","Provider","value","Container","FixedContainer","Scrollable","window","screen","height","StyledModal","Cross","TitleContainer","Title","SubTitle","Name","Box","Link","About","withDataContext","useState","filmOnModal","shouldShowModal","shouldShowAboutModal","setShouldShowAboutModal","Filter","year","toString","href","target","Consumer","data","render","StrictMode"],"mappings":"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","file":"static/js/main.4f268de8.chunk.js","sourcesContent":["import React from 'react'\nimport ReactDOM from 'react-dom'\n\nconst modalRoot = document.getElementById('portal')\n\nclass Modal extends React.Component {\n  constructor(props) {\n    super(props)\n    this.el = document.createElement('div')\n  }\n\n  componentDidMount() {\n    // The portal element is inserted in the DOM tree after\n    // the Modal's children are mounted, meaning that children\n    // will be mounted on a detached DOM node. If a child\n    // component requires to be attached to the DOM tree\n    // immediately when mounted, for example to measure a\n    // DOM node, or uses 'autoFocus' in a descendant, add\n    // state to Modal and only render the children when Modal\n    // is inserted in the DOM tree.\n    modalRoot.appendChild(this.el)\n  }\n\n  componentWillUnmount() {\n    modalRoot.removeChild(this.el)\n  }\n\n  render() {\n    return ReactDOM.createPortal(this.props.children, this.el)\n  }\n}\n\nexport default Modal\n","export const FILTERS = [\n  '喜剧',\n  '历史',\n  '音乐',\n  '家庭',\n  '传记',\n  '同性',\n  '爱情',\n  '古装',\n  '科幻',\n  '动作',\n  '剧情',\n  '武侠',\n  '犯罪',\n  '冒险',\n  '恐怖',\n  '奇幻',\n  '悬疑',\n  '惊悚',\n  '情色',\n  '鬼怪',\n]\n\nexport const COLORS = {\n  YELLOW: '#fff801',\n}\n","import React from 'react'\nimport styled from 'styled-components'\n\nimport { FILTERS } from './constant'\n\nconst FilterContainer = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n\n  @media screen and (max-width: 992px) {\n    width: 90%;\n    overflow-x: scroll;\n    justify-content: inherit;\n    margin-left: 2%;\n  }\n`\n\nexport default ({ filters, setFilters }) => {\n  return (\n    <FilterContainer>\n      <>\n        <input\n          type=\"checkbox\"\n          id=\"全选\"\n          name=\"全选\"\n          checked={filters.length === FILTERS.length}\n          onChange={() => {\n            filters.length === FILTERS.length\n              ? setFilters([])\n              : setFilters(FILTERS)\n          }}\n        />\n        <label for=\"全选\">全选</label>\n        {FILTERS.map((filter) => {\n          const isChecked = filters.includes(filter)\n          return (\n            <>\n              <input\n                type=\"checkbox\"\n                id={filter}\n                name={filter}\n                checked={isChecked}\n                onChange={() => {\n                  let newFilters = filters.includes(filter)\n                    ? filters.filter((a) => a !== filter)\n                    : filters.concat([filter])\n                  setFilters(newFilters)\n                }}\n              />\n              <label htmlFor={filter}>{filter}</label>\n            </>\n          )\n        })}\n      </>\n    </FilterContainer>\n  )\n}\n","import React from 'react'\nimport styled from 'styled-components'\nimport get from 'lodash.get'\n\nconst FilmContainer = styled.div`\n  display: flex;\n  flex-direction: row;\n  margin-top: 140px;\n  width: 3000px;\n`\n\nconst Year = styled.div`\n  font-weight: bold;\n  font-size: 20px;\n  padding: 10px 0;\n`\n\nconst FilmBar = styled.div`\n  flex: 1;\n  flex-direction: column;\n  border-right: 1px solid #ffffff59;\n  margin-right: 10px;\n`\n\nconst Film = styled.div`\n  border-radius: 100%;\n  cursor: pointer;\n\n  &:hover {\n    text-decoration: underline;\n  }\n`\n\nconst Films = ({ filmLists, filters, setShouldShowModal, setFilmOnModal }) => (\n  <FilmContainer>\n    {filmLists.map((filmList, key) => (\n      <FilmBar>\n        <>\n          <Year>{key + 1979}</Year>\n          {filmList.map((film) => {\n            const shouldShowFilm = get(film, 'type', []).some((filter) =>\n              filters.includes(filter)\n            )\n            if (shouldShowFilm) {\n              return (\n                <Film\n                  onClick={() => {\n                    setShouldShowModal(true)\n                    console.log(film)\n                    setFilmOnModal(film)\n                  }}\n                >\n                  {film.name}\n                </Film>\n              )\n            }\n            return null\n          })}\n        </>\n      </FilmBar>\n    ))}\n  </FilmContainer>\n)\n\nconst areEqual = (prevProps, nextProps) => {\n  return prevProps.filters === nextProps.filters\n}\n\nexport default React.memo(Films, areEqual)\n","import React from 'react'\n\nimport data1979 from './data/1979.json'\nimport data1980 from './data/1980.json'\nimport data1981 from './data/1981.json'\nimport data1982 from './data/1982.json'\nimport data1983 from './data/1983.json'\nimport data1984 from './data/1984.json'\nimport data1985 from './data/1985.json'\nimport data1986 from './data/1986.json'\nimport data1987 from './data/1987.json'\nimport data1988 from './data/1988.json'\nimport data1989 from './data/1989.json'\nimport data1990 from './data/1990.json'\nimport data1991 from './data/1991.json'\nimport data1992 from './data/1992.json'\nimport data1993 from './data/1993.json'\nimport data1994 from './data/1994.json'\nimport data1995 from './data/1995.json'\nimport data1996 from './data/1996.json'\nimport data1997 from './data/1997.json'\nimport data1998 from './data/1998.json'\nimport data1999 from './data/1999.json'\nimport data2000 from './data/2000.json'\nimport data2001 from './data/2001.json'\nimport data2002 from './data/2002.json'\n\nconst sortByRate = (a, b) => b.rate - a.rate\n\nconst initialData = [\n  data1979.sort(sortByRate),\n  data1980.sort(sortByRate),\n  data1981.sort(sortByRate),\n  data1982.sort(sortByRate),\n  data1983.sort(sortByRate),\n  data1984.sort(sortByRate),\n  data1985.sort(sortByRate),\n  data1986.sort(sortByRate),\n  data1987.sort(sortByRate),\n  data1988.sort(sortByRate),\n  data1989.sort(sortByRate),\n  data1990.sort(sortByRate),\n  data1991.sort(sortByRate),\n  data1992.sort(sortByRate),\n  data1993.sort(sortByRate),\n  data1994.sort(sortByRate),\n  data1995.sort(sortByRate),\n  data1996.sort(sortByRate),\n  data1997.sort(sortByRate),\n  data1998.sort(sortByRate),\n  data1999.sort(sortByRate),\n  data2000.sort(sortByRate),\n  data2001.sort(sortByRate),\n  data2002.sort(sortByRate),\n]\n\nconst DataContext = React.createContext(initialData)\n\nexport const DataContextProvider = (props) => {\n  return (\n    <DataContext.Provider value={initialData}>\n      {props.children}\n    </DataContext.Provider>\n  )\n}\n\nexport const withDataContext = (Component) => {\n  return (props) => (\n    <DataContext.Consumer>\n      {(data) => <Component filmLists={data} {...props} />}\n    </DataContext.Consumer>\n  )\n}\n","import React from 'react'\nimport styled from 'styled-components'\nimport Modal from './Modal'\nimport Filter from './Filter'\nimport Films from './Films'\nimport get from 'lodash.get'\nimport { FILTERS, COLORS } from './constant'\nimport { withDataContext } from './DataProvider'\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  background-color: black;\n  color: ${COLORS.YELLOW};\n`\n\nconst FixedContainer = styled.div`\n  position: fixed;\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  background: black;\n`\n\nconst Scrollable = styled.div`\n  overflow: scroll;\n  width: 96%;\n  height: ${window.screen.height - 120}px;\n  margin-left: 2%;\n`\n\nconst StyledModal = styled.div`\n  position: fixed;\n  z-index: 999;\n  display: flex;\n  width: 50%;\n  height: auto;\n  flex-direction: column;\n  left: 20%;\n  top: 20%;\n  padding: 3%;\n  background: black;\n  border: 1px solid white;\n  color: ${COLORS.YELLOW};\n`\n\nconst Cross = styled.div`\n  position: absolute;\n  right: 2%;\n  top: 2%;\n  cursor: pointer;\n`\n\nconst TitleContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 30px 0;\n`\n\nconst Title = styled.div`\n  font-size: 30px;\n`\n\nconst SubTitle = styled.div`\n  font-size: 20px;\n`\n\nconst Name = styled.div`\n  font-size: 25px;\n`\n\nconst Box = styled.div`\n  margin: 10px 0;\n`\n\nconst Link = styled.a`\n  color: ${COLORS.YELLOW};\n`\n\nconst About = styled.div`\n  position: absolute;\n  right: 20px;\n  top: 20px;\n  font-size: 20px;\n  border-bottom: 1px solid;\n  cursor: pointer;\n`\n\nconst App = ({ filmLists }) => {\n  const [filmOnModal, setFilmOnModal] = React.useState(null)\n  const [shouldShowModal, setShouldShowModal] = React.useState(false)\n  const [shouldShowAboutModal, setShouldShowAboutModal] = React.useState(false)\n\n  const [filters, setFilters] = React.useState(FILTERS)\n\n  return (\n    <Container>\n      <FixedContainer>\n        <TitleContainer>\n          <Title>香港电影名单1979-2002</Title>\n          <SubTitle>按照豆瓣评分排序</SubTitle>\n        </TitleContainer>\n        <Filter filters={filters} setFilters={setFilters} />\n      </FixedContainer>\n      <Scrollable>\n        <Films\n          filters={filters}\n          filmLists={filmLists}\n          setShouldShowModal={setShouldShowModal}\n          setFilmOnModal={setFilmOnModal}\n        />\n        {shouldShowModal && (\n          <Modal>\n            <StyledModal>\n              <Cross\n                onClick={() => {\n                  setShouldShowModal(false)\n                }}\n              >\n                关闭\n              </Cross>\n              <Name>\n                {filmOnModal.name} ({filmOnModal.year})\n              </Name>\n              <Box>类型: {get(filmOnModal, 'type', '').toString()}</Box>\n              <div>豆瓣评分: {get(filmOnModal, 'rate', '').toString()}</div>\n              <Box>主演: {get(filmOnModal, 'actor', '').toString()}</Box>\n              <div>故事简介: {get(filmOnModal, 'story', '').toString()}</div>\n              <Box>\n                <Link\n                  href={`https://movie.douban.com/subject/${filmOnModal.id}`}\n                  target=\"_blank\"\n                >\n                  查看豆瓣页面\n                </Link>\n              </Box>\n            </StyledModal>\n          </Modal>\n        )}\n      </Scrollable>\n      <About\n        onClick={() => {\n          setShouldShowAboutModal(true)\n        }}\n      >\n        关于本站\n      </About>\n      {shouldShowAboutModal && (\n        <Modal>\n          <StyledModal>\n            <Cross\n              onClick={() => {\n                setShouldShowAboutModal(false)\n              }}\n            >\n              关闭\n            </Cross>\n            <Box>\n              <b>1. 这个网站怎么用？</b>\n            </Box>\n            <p>\n              电影按照豆瓣评分排序。点击Filter筛选电影类型。点击电影显示详情。\n            </p>\n            <Box>\n              <b>2. 数据来源是什么？</b>\n            </Box>\n            <p>通过Cypress按照片名获得豆瓣ID。通过豆瓣API获得数据。</p>\n            <Box>\n              <b>3. 为什么设计这么丑？</b>\n            </Box>\n            <p>\n              <del>我不是设计师</del>。丑的设计永不落伍。\n            </p>\n            <Box>\n              <b>4. 为什么是1979-2002？</b>\n            </Box>\n            <p>\n              1979年是香港电影新浪潮的开始。2002年是合拍片浪潮的开始，\n              <del>一个时代的结束</del>。\n            </p>\n            <Box>\n              <b>5. 为什么要做这个网站？</b>\n            </Box>\n            <p>致敬香港电影，打捞片海遗珠。</p>\n          </StyledModal>\n        </Modal>\n      )}\n    </Container>\n  )\n}\nexport default withDataContext(App)\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\nimport { DataContextProvider } from './DataProvider'\n\nReactDOM.render(\n  <React.StrictMode>\n    <DataContextProvider>\n      <App />\n    </DataContextProvider>\n  </React.StrictMode>,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}